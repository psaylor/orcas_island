define(["jquery","sharedAudio","sharedSocket","utils"],function(e,t,n,r){console.log("> Loading synthesizer.js");try{var i=window.speechSynthesis,s=window.SpeechSynthesisUtterance;console.log("Got SpeechSynthesis")}catch(o){var i=Object,s=Object;console.log("Error getting SpeechSynthesis:",o);return}var u=function(t,n){if(!(this instanceof u))return new u(element,n);console.log("Creating new Synthesizer for text",t),n=n||{},this.settings=e.extend({},u.DEFAULTS,n),this.utteranceText=t,this.$this=e(this);var r=this;this._setupSynthesis(),this.settings.autoPlay&&this.play()};return u.DEFAULTS={autoPlay:!0,voiceIndex:0,rate:1,volume:1,pitch:1},u.SpeechSynthesis=i,u.SpeechSynthesisUtterance=s,u.prototype._setupSynthesis=function(){this.utterance=new u.SpeechSynthesisUtterance(this.utteranceText),this.utterance.volume=this.settings.volume,this.utterance.rate=this.settings.rate,this.utterance.pitch=this.settings.pitch;var e=this;this.utterance.onend=function(t){console.log("SpeechSynthesisUtterance end event",t),e.$this.trigger("end.spoke.synthesizer",[t])},this.utterance.onstart=function(t){console.log("SpeechSynthesisUtterance start event",t),e.$this.trigger("start.spoke.synthesizer",[t])},this.utterance.onboundary=function(t){console.log("SpeechSynthesisUtterance reached boundary",t),e.$this.trigger("boundary.spoke.synthesizer",[t])}},u.prototype.play=function(){u.SpeechSynthesis.cancel(),u.SpeechSynthesis.speak(this.utterance),u.SpeechSynthesis.paused&&u.SpeechSynthesis.resume()},u.prototype.stop=function(){u.SpeechSynthesis.pause()},u.getVoices=function(){return u.SpeechSynthesis.getVoices()},u.prototype.on=function(e,t){return this.$this.on(e,t)},u});